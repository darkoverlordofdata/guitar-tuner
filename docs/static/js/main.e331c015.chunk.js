(this["webpackJsonpwasm-audio-app"]=this["webpackJsonpwasm-audio-app"]||[]).push([[0],{44:function(e,t,a){e.exports=a(58)},49:function(e,t,a){},50:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),i=(a(49),a(19)),s=a.n(i),l=a(25),u=a(15),d=(a(50),a(20)),p=a.n(d),m=a(26),h=a(30),b=a(14),v=a(39),w=a(32),f=a(37),g=function(e){Object(w.a)(a,e);var t=Object(v.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"init",value:function(e,t,a){var n=this;this.onPitchDetectedCallback=t,this.numAudioSamplesPerAnalysis=a,this.port.onmessage=function(e){return n.onmessage(e.data)},this.port.postMessage({type:"send-wasm-module",wasmBytes:e})}},{key:"onprocessorerror",value:function(e){console.log("An error from AudioWorkletProcessor.process() occurred: ".concat(e))}},{key:"onmessage",value:function(e){"wasm-module-loaded"===e.type?this.port.postMessage({type:"init-detector",sampleRate:this.context.sampleRate,numAudioSamplesPerAnalysis:this.numAudioSamplesPerAnalysis}):"pitch"===e.type&&this.onPitchDetectedCallback(e.pitch)}}]),a}(Object(f.a)(AudioWorkletNode));function E(){return k.apply(this,arguments)}function k(){return(k=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.navigator.mediaDevices){e.next=2;break}throw new Error("This browser does not support web audio or it is not enabled.");case 2:return e.prev=2,e.next=5,window.navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 5:return t=e.sent,e.abrupt("return",t);case 9:e.prev=9,e.t0=e.catch(2),e.t1=e.t0.name,e.next="NotAllowedError"===e.t1?14:"NotFoundError"===e.t1?15:16;break;case 14:throw new Error("A recording device was found but has been disallowed for this application. Enable the device in the browser's settings.");case 15:throw new Error("No recording device was found. Please attach a microphone and click Retry.");case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function P(e){return x.apply(this,arguments)}function x(){return(x=Object(m.a)(p.a.mark((function e(t){var a,n,r,o,c,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return a=e.sent,n=new window.AudioContext,r=n.createMediaStreamSource(a),e.prev=5,e.next=8,window.fetch("wasm-audio/wasm_audio_bg.wasm");case 8:return c=e.sent,e.next=11,c.arrayBuffer();case 11:return i=e.sent,s="PitchProcessor.js",e.prev=13,e.next=16,n.audioWorklet.addModule(s);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(13),new Error("Failed to load audio analyzer worklet at url: ".concat(s,". Further info: ").concat(e.t0.message));case 21:o=new g(n,"PitchProcessor"),2048,o.init(i,t,2048),r.connect(o),o.connect(n.destination),e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(5),new Error("Failed to load audio analyzer WASM module. Further info: ".concat(e.t1.message));case 31:return e.abrupt("return",{context:n,node:o});case 32:case"end":return e.stop()}}),e,null,[[5,28],[13,18]])})))).apply(this,arguments)}var y=a(24),A=a(81),j=a(80),O=a(82),C=a(83);function S(){var e=r.a.useState("E2"),t=Object(u.a)(e,2),a=t[0],n=t[1],o=function(e){alert("selected ".concat(e.target.value)),n(e.target.value)};return r.a.createElement("div",null,r.a.createElement(C.a,{value:"top",control:r.a.createElement(O.a,{checked:"E2"===a,onChange:o,value:"E2",name:"radio-button-string",inputProps:{"aria-label":"E2"}}),label:"E2",labelPlacement:"top"}),r.a.createElement(C.a,{value:"top",control:r.a.createElement(O.a,{checked:"A2"===a,onChange:o,value:"A2",name:"radio-button-string",inputProps:{"aria-label":"A2"}}),label:"A2",labelPlacement:"top"}),r.a.createElement(C.a,{value:"top",control:r.a.createElement(O.a,{checked:"D3"===a,onChange:o,value:"D3",name:"radio-button-string",inputProps:{"aria-label":"D3"}}),label:"D3",labelPlacement:"top"}),r.a.createElement(C.a,{value:"top",control:r.a.createElement(O.a,{checked:"G3"===a,onChange:o,value:"G3",color:"default",name:"radio-button-string",inputProps:{"aria-label":"G3"}}),label:"G3",labelPlacement:"top"}),r.a.createElement(C.a,{value:"top",control:r.a.createElement(O.a,{checked:"B3"===a,onChange:o,value:"B3",color:"default",name:"radio-button-string",inputProps:{"aria-label":"B3"}}),label:"B3",labelPlacement:"top"}),r.a.createElement(C.a,{value:"top",control:r.a.createElement(O.a,{checked:"E4"===a,onChange:o,value:"E4",color:"default",name:"radio-button-string",inputProps:{"aria-label":"E4"}}),label:"E4",labelPlacement:"top"}))}var B=a(34),D=a(35),F=a(36),M=a(40),G=function(e){Object(M.a)(a,e);var t=Object(F.a)(a);function a(){return Object(B.a)(this,a),t.apply(this,arguments)}return Object(D.a)(a,[{key:"render",value:function(){return r.a.createElement(y.RadialGauge,{units:"Hz",title:"Frequency",value:this.props.latestPitch?"".concat(this.props.latestPitch.toFixed(1)):this.props.running?"82":"0",minValue:77,maxValue:87,majorTicks:["77","78","79","80","81","82","83","84","85","86","87"],minorTicks:2,strokeTicks:!0,highlights:[{from:77,to:82,color:"rgba(0,0, 255, .3)"},{from:82,to:87,color:"rgba(255, 0, 0, .3)"}],width:400,height:400})}}]),a}(r.a.Component);function N(){var e=r.a.useState(void 0),t=Object(u.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(u.a)(o,2),i=c[0],d=c[1],p=r.a.useState(void 0),m=Object(u.a)(p,2),h=m[0],b=m[1];if(!a)return r.a.createElement("button",{onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,P(b);case 3:e.t1=e.sent,(0,e.t0)(e.t1),d(!0);case 6:case"end":return e.stop()}}),e)})))},"Tune Your Guitar or Bass");var v=a.context;return r.a.createElement(j.a,{container:!0,direction:"column"},r.a.createElement(j.a,null,"A4 = 440hz"),r.a.createElement(j.a,null,r.a.createElement(G,{running:i,latestPitch:h})),r.a.createElement(j.a,null,r.a.createElement(S,{instrument:"guitar",tuning:"standard"})),r.a.createElement(j.a,null,r.a.createElement(A.a,{onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,v.suspend();case 3:d("running"===v.state),e.next=9;break;case 6:return e.next=8,v.resume();case 8:d("running"===v.state);case 9:case"end":return e.stop()}}),e)}))),disabled:"running"!==v.state&&"suspended"!==v.state},i?"Pause":"Resume")))}var W=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-content"},r.a.createElement(N,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.e331c015.chunk.js.map