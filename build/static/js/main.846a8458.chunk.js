(this["webpackJsonpwasm-audio-app"]=this["webpackJsonpwasm-audio-app"]||[]).push([[0],{16:function(e,t,r){e.exports=r(27)},21:function(e,t,r){},23:function(e,t,r){},27:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(9),c=r.n(a),i=(r(21),r(1)),s=r.n(i),l=r(3),u=r(6),d=(r(23),r(10)),p=r(11),h=r(14),m=r(12),w=r(15),f=function(e){Object(m.a)(r,e);var t=Object(h.a)(r);function r(){return Object(d.a)(this,r),t.apply(this,arguments)}return Object(p.a)(r,[{key:"init",value:function(e,t,r){var n=this;this.onPitchDetectedCallback=t,this.numAudioSamplesPerAnalysis=r,this.port.onmessage=function(e){return n.onmessage(e.data)},this.port.postMessage({type:"send-wasm-module",wasmBytes:e})}},{key:"onprocessorerror",value:function(e){console.log("An error from AudioWorkletProcessor.process() occurred: ".concat(e))}},{key:"onmessage",value:function(e){"wasm-module-loaded"===e.type?this.port.postMessage({type:"init-detector",sampleRate:this.context.sampleRate,numAudioSamplesPerAnalysis:this.numAudioSamplesPerAnalysis}):"pitch"===e.type&&this.onPitchDetectedCallback(e.pitch)}}]),r}(Object(w.a)(AudioWorkletNode));function v(){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.navigator.mediaDevices){e.next=2;break}throw new Error("This browser does not support web audio or it is not enabled.");case 2:return e.prev=2,e.next=5,window.navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 5:return t=e.sent,e.abrupt("return",t);case 9:e.prev=9,e.t0=e.catch(2),e.t1=e.t0.name,e.next="NotAllowedError"===e.t1?14:"NotFoundError"===e.t1?15:16;break;case 14:throw new Error("A recording device was found but has been disallowed for this application. Enable the device in the browser's settings.");case 15:throw new Error("No recording device was found. Please attach a microphone and click Retry.");case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function g(e){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(s.a.mark((function e(t){var r,n,o,a,c,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return r=e.sent,n=new window.AudioContext,o=n.createMediaStreamSource(r),e.prev=5,e.next=8,window.fetch("wasm-audio/wasm_audio_bg.wasm");case 8:return c=e.sent,e.next=11,c.arrayBuffer();case 11:return i=e.sent,l="PitchProcessor.js",e.prev=13,e.next=16,n.audioWorklet.addModule(l);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(13),new Error("Failed to load audio analyzer worklet at url: ".concat(l,". Further info: ").concat(e.t0.message));case 21:a=new f(n,"PitchProcessor"),2048,a.init(i,t,2048),o.connect(a),a.connect(n.destination),e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(5),new Error("Failed to load audio analyzer WASM module. Further info: ".concat(e.t1.message));case 31:return e.abrupt("return",{context:n,node:a});case 32:case"end":return e.stop()}}),e,null,[[5,28],[13,18]])})))).apply(this,arguments)}var x=r(13);function y(e){var t=e.running,r=e.latestPitch;return o.a.createElement(x.RadialGauge,{units:"Hz",title:"Frequency",value:r?"".concat(r.toFixed(1)):t?"80":"0",minValue:77,maxValue:87,majorTicks:["77","78","79","80","81","82","83","84","85","86","87"],minorTicks:2,strokeTicks:!0,highlights:[{from:77,to:82,color:"rgba(0,0, 255, .3)"},{from:82,to:87,color:"rgba(255, 0, 0, .3)"}],width:400,height:400,ticksAngle:225,startAngle:67.5,colorMajorTicks:"#ddd",colorMinorTicks:"#ddd",colorTitle:"#eee",colorUnits:"#ccc",colorNumbers:"#eee",colorPlate:"#222",borderShadowWidth:"0",borders:!0,needleType:"arrow",needleWidth:2,needleCircleSize:7,needleCircleOuter:!0,needleCircleInner:!1,animationDuration:1500,animationRule:"linear",colorBorderOuter:"#333","colorBorderOuter-end":"#111",colorBorderMiddle:"#222","colorBorderMiddle-end":"#111",colorBorderInner:"#111","colorBorderInner-end":"#333",colorNeedleShadowDown:"#333",colorNeedleCircleOuter:"#333","colorNeedleCircleOuter-end":"#111",colorNeedleCircleInner:"#111","colorNeedleCircleInner-end":"#222",valueBoxBorderRadius:"0",colorValueBoxRect:"#222","colorValueBoxRect-end":"#333",fontValue:"Led",fontNumbers:"Led",fontTitle:"Led",fontUnits:"Led"})}function E(){var e=o.a.useState(void 0),t=Object(u.a)(e,2),r=t[0],n=t[1],a=o.a.useState(!1),c=Object(u.a)(a,2),i=c[0],d=c[1],p=o.a.useState(void 0),h=Object(u.a)(p,2),m=h[0],w=h[1];if(!r)return o.a.createElement("button",{onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,g(w);case 3:e.t1=e.sent,(0,e.t0)(e.t1),d(!0);case 6:case"end":return e.stop()}}),e)})))},"Start listening");var f=r.context;return o.a.createElement("div",null,o.a.createElement("button",{onClick:Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}return e.next=3,f.suspend();case 3:d("running"===f.state),e.next=9;break;case 6:return e.next=8,f.resume();case 8:d("running"===f.state);case 9:case"end":return e.stop()}}),e)}))),disabled:"running"!==f.state&&"suspended"!==f.state},i?"Pause":"Resume"),o.a.createElement("div",null),o.a.createElement(y,{running:i,latestPitch:m}))}var A=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"App-content"},o.a.createElement(E,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.846a8458.chunk.js.map